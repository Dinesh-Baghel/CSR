@page "/forgotpassword"
@using Microsoft.AspNetCore.Authentication
@layout BlankLayout
@inject IHttpContextAccessor HttpContextAccessor
@using System.Text.RegularExpressions

<MudPaper Class="pa-6 mx-auto mt-10" MaxWidth="400px" Elevation="4">
    <MudText Typo="Typo.h5" Class="mb-4">Forgot Password</MudText>

    <MudTextField @bind-Value="_email"
                  Label="Enter your registered email id"
                  Variant="Variant.Outlined"
                  Immediate="true"
                  Required="true">
    </MudTextField>

    @if (!string.IsNullOrWhiteSpace(_maskedEmail))
    {
        <MudText Class="mt-2">Identified Email:<br /> <b>@_maskedEmail</b></MudText>
    }

    <MudButton Variant="Variant.Filled"
               Color="Color.Primary"
               Class="mt-4"
               OnClick="ForgotPasswordAsync"
               Disabled="@_isProcessing">
        @(_isProcessing ? "Processing..." : "Forgot Password")
    </MudButton>
    <MudButton Variant="Variant.Filled"
               Color="Color.Secondary"
               Class="mt-4"
               OnClick="BacktoLogin">
        Back to Login
    </MudButton>

    <MudSnackbarProvider />
</MudPaper>
